{% extends 'base.html' %}

{% block styled %}
<style>
#documentos {
   display: flex;
   flex-direction: column;
   gap: 0.5em;
}

#doc {
   padding: 9px;
   border: 0.5px solid #fff;
   border-radius: 6px;
}

a{
   color: #fff;
   text-decoration: none;
}
</style>
{% endblock %}

{% block content %}
<div class="container">
   
   <h3 id="assunto">{{sessao.assunto}}</h3>
   <small>Criada: {{sessao.data}}</small>
   <textarea id="resumo" placeholder="Digite aqui suas anota√ß√µes">{{sessao.resumo}}</textarea>
   <button onclick="updateAnotacao('{{sessao.id}}')">Atualizar Anota√ß√£o</button>

<br>
   <div class="add-doc">
      <h2>Adicione um arquivo a sua sess√£o de estudos:</h2>
      <button onclick="abrirModalArquivo('{{sessao.id}}')">Adicionar</button>
   </div>
<br>
   <div id="documentos">
      <h2>Documentos salvos na sess√£o:</h2>
      {% if documentos %}
      {% for documento in documentos %}
         <div style="display:flex;align-items:center;gap:0.5em;">
            <a id="doc" href="/documento/{{documento.id}}">{{documento.filename}}</a>
            <button style="width:auto;padding:4px 10px;" onclick="deletarDoc('{{documento.id}}', this)">üóëÔ∏è</button>
         </div>
      {% endfor %}

      {% else %}
      <p>Nenhum.</p>
      {% endif %}
   </div>

   <div id="documentos">
      <h2>Quizzes criados na sess√£o:</h2>
      {% if quizzes %}
      {% for quiz in quizzes %}
      <a id="doc" href="/quiz/{{quiz.id}}">{{quiz.titulo}}</a>
      {% endfor %}

      {% else %}
      <p>Nenhum.</p>
      {% endif %}
   </div>

   <div>
      <button onclick="gerarQuiz('{{sessao.id}}')" disabled>Gerar Quiz (DESABILITADO)</button>
   </div>

   

   <br><br>
   <button onclick="window.location.href='/api/delete-session/{{sessao.id}}'">Deletar Sess√£o de Estudos</button>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.6.0/axios.min.js" integrity="sha512-WrdC3CE9vf1nBf58JHepuWT4x24uTacky9fuzw2g/3L9JkihgwZ6Cfv+JGTtNyosOhEmttMtEZ6H3qJWfI7gIQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="{{ url_for('static', filename='js/session.js') }}"></script>
<script>
function mostrarAjuda() {
   Swal.fire({
      title: 'Como funciona esta p√°gina?',
      html: `
         <b>Resumo/Anota√ß√µes:</b> Escreva ou edite suas anota√ß√µes sobre a sess√£o e clique em "Atualizar Anota√ß√£o".<br><br>
         <b>Adicionar Arquivo:</b> Selecione um arquivo e clique em "Adicionar" para anexar materiais √† sess√£o.<br><br>
         <b>Documentos Salvos:</b> Clique nos nomes dos arquivos para abri-los.<br><br>
         <b>Quizzes:</b> Veja quizzes j√° criados ou clique em "Gerar Quiz" para criar um novo com base no conte√∫do da sess√£o.<br><br>
         <b>Deletar Sess√£o:</b> Use o bot√£o ao final para excluir esta sess√£o de estudos.<br><br>
         <i>Use esta p√°gina para organizar seus estudos, salvar materiais e testar seus conhecimentos!</i>
      `,
      icon: 'info',
      confirmButtonText: 'Entendi!'
   });
}
</script>
{% endblock %}